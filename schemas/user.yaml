# User domain schemas
UserRole:
  type: string
  enum:
    - user
    - admin
    - observer
  description: User role determining access level

UserStatus:
  type: string
  enum:
    - active
    - suspended
    - deactivated

User:
  type: object
  required:
    - id
    - sub
    - email
  properties:
    id:
      type: string
      format: uuid
    sub:
      type: string
      description: OIDC subject identifier
    email:
      type: string
      format: email
    name:
      type: string
    picture:
      type: string
      format: uri
    hd:
      type: string
      description: Hosted domain (organization domain)
    role:
      $ref: '#/UserRole'
    status:
      $ref: '#/UserStatus'
    department:
      type:
        - string
        - "null"
    is_super_admin:
      type: boolean
      description: Super admin has full platform control and cannot be deleted
    has_password:
      type: boolean
      description: Whether user has password authentication (vs SSO-only)
    mfa_enabled:
      type: boolean
      description: Whether MFA is enabled for this user
    last_login_at:
      type:
        - string
        - "null"
      format: date-time
    password_changed_at:
      type:
        - string
        - "null"
      format: date-time
    created_at:
      type: string
      format: date-time
    updated_at:
      type: string
      format: date-time

UserCreate:
  type: object
  required:
    - email
  properties:
    email:
      type: string
      format: email
    name:
      type: string
    role:
      $ref: '#/UserRole'
    department:
      type: string

UserUpdate:
  type: object
  properties:
    name:
      type: string
    role:
      $ref: '#/UserRole'
    status:
      $ref: '#/UserStatus'
    department:
      type: string

UserStatusUpdate:
  type: object
  required:
    - status
  properties:
    status:
      $ref: '#/UserStatus'

UserBulkImport:
  type: object
  required:
    - users
  properties:
    users:
      type: array
      items:
        $ref: '#/UserCreate'
    send_invites:
      type: boolean
      default: true
      description: Send invitation emails to new users

UserBulkImportResult:
  type: object
  properties:
    created:
      type: integer
    updated:
      type: integer
    failed:
      type: integer
    errors:
      type: array
      items:
        type: object
        properties:
          email:
            type: string
          error:
            type: string

PaginatedUsers:
  type: object
  required:
    - users
    - total
    - limit
    - offset
  properties:
    users:
      type: array
      items:
        $ref: '#/User'
    total:
      type: integer
    limit:
      type: integer
    offset:
      type: integer
